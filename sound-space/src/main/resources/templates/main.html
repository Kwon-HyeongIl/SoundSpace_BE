<!DOCTYPE html>
<html lang="en">
<head>

    <head>
        <meta charset="UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <title>Title</title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
    </head>

</head>
<body>
</body>
<script>
    $.ajax({
        type: 'GET',
        url: '/api/v1/users/user',
        data: {
            accessToken: localStorage.getItem("accessToken")
        },
        // beforeSend: function (xhr) {
        //     xhr.setRequestHeader("accessToken", localStorage.getItem("accessToken"));
        // },
    }).done(function(response) {
        alert(response + "님 환영합니다.");
        location.href = "/myhome";
    }).fail(function(xhr, status, error){
        var jsonResponse = JSON.parse(xhr.responseText);
        if(jsonResponse.status == "403" || jsonResponse.status == "500"){ //로그인을 안했거나 토큰이 만료됐거나
            alert("로그인이 필요한 페이지입니다.");
            location.href = "/log-in";
        }
    });
</script>
</html>